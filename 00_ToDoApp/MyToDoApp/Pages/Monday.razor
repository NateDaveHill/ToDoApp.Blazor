@page "/monday"
@using MyToDoAppMudBlazor.Shared

@inject IDialogService DialogService


<h3>Monday</h3>


<MudFab @onclick="OpenDialog" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" />
<br/>


@foreach (var test in ToDos)
{
    <br/>
    <MudCheckBox @bind-Checked="@test.IsDone" T="bool" Color="Color.Primary">
        ToDo: @test.Title
        <br/>
        Comment: @test.Comment
    </MudCheckBox>
    <br/>

}


@code {

    MudDialogInstance MudDialog;
    readonly ToDos TempToDos = new();
    public List<ToDos>? ToDos;

    protected override void OnInitialized()
    {
        
        using (var context = new MyDbContext())
        {
            context.Database.EnsureCreated();
            ToDos = context.ToDos.Select(x => x).ToList();
        }
    }

    private void OpenDialog()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        DialogService.Show<AddNewToDoDialog>("Add new To Do", options);
    }

    private void Refresh()
    {
        using (var context = new MyDbContext())
        {
            ToDos = context.ToDos.Select(x => x).ToList();
        }
    }
}